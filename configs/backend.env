# ==========================================
# 再探！后端环境变量配置
# ==========================================
# 复制此文件到 zaitan-api/.env 并填写真实值
# ⚠️ 永远不要提交到 Git！

# ------------------------------------------
# 1. 数据库 (Supabase) - 必需
# ------------------------------------------
# 申请地址: https://supabase.com
# 步骤: 创建项目 → Database → Connection string
DATABASE_URL="postgresql://postgres:[YOUR-DB-PASSWORD]@db.[PROJECT-ID].supabase.co:5432/postgres"
SUPABASE_URL="https://[PROJECT-ID].supabase.co"
SUPABASE_ANON_KEY="[YOUR-ANON-KEY]"
SUPABASE_SERVICE_ROLE_KEY="[YOUR-SERVICE-ROLE-KEY]"

# ------------------------------------------
# 2. AI服务 (OpenAI) - 必需
# ------------------------------------------
# 申请地址: https://platform.openai.com
# 步骤: Sign up → API keys → Create new secret key
# 新用户有 $5 免费额度
OPENAI_API_KEY="sk-[YOUR-OPENAI-KEY]"

# ------------------------------------------
# 3. 支付服务 (Stripe) - 可选（可先不配置）
# ------------------------------------------
# 申请地址: https://stripe.com
# 步骤: 注册 → Developers → API keys
STRIPE_SECRET_KEY="sk_test_[YOUR-STRIPE-KEY]"
STRIPE_WEBHOOK_SECRET="whsec_[YOUR-WEBHOOK-SECRET]"
# 在 Stripe Dashboard → Products 创建价格后复制ID
STRIPE_PRICE_MONTHLY="price_[MONTHLY-PRICE-ID]"
STRIPE_PRICE_YEARLY="price_[YEARLY-PRICE-ID]"

# ------------------------------------------
# 4. 短信服务 (阿里云) - 可选（可先使用测试验证码 000000）
# ------------------------------------------
# 申请地址: https://www.aliyun.com/product/sms
# 步骤: 
#   1. 实名认证
#   2. 申请短信签名（如"再探"）
#   3. 申请短信模板（验证码模板）
#   4. 获取 AccessKey: https://ram.console.aliyun.com/manage/ak
ALIBABA_CLOUD_ACCESS_KEY_ID="[YOUR-ALIYUN-AK-ID]"
ALIBABA_CLOUD_ACCESS_KEY_SECRET="[YOUR-ALIYUN-AK-SECRET]"
SMS_SIGN_NAME="再探"
SMS_TEMPLATE_CODE="SMS_[YOUR-TEMPLATE-CODE]"

# ------------------------------------------
# 5. 微信登录 - 可选（可先用手机号登录）
# ------------------------------------------
# 申请地址: https://mp.weixin.qq.com
# 步骤: 注册微信开放平台 → 创建应用 → 获取AppID
WECHAT_APPID="wx[YOUR-WECHAT-APPID]"
WECHAT_SECRET="[YOUR-WECHAT-SECRET]"

# ------------------------------------------
# 6. 缓存 (Upstash Redis) - 可选
# ------------------------------------------
# 申请地址: https://upstash.com
# 免费额度: 10,000请求/天
UPSTASH_REDIS_REST_URL="https://[YOUR-PROJECT].upstash.io"
UPSTASH_REDIS_REST_TOKEN="[YOUR-TOKEN]"

# ------------------------------------------
# 7. 安全密钥 - 必需（自己生成一个随机字符串）
# ------------------------------------------
# 生成方式: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET="[YOUR-RANDOM-SECRET-KEY-MIN-32-CHARS]"

# ------------------------------------------
# 8. 应用配置
# ------------------------------------------
PORT=3000
NODE_ENV="production"
# 你的前端域名（部署后填写）
FRONTEND_URL="https://ronzhao-tech.github.io/zaitan-h5"
